#
# $Header$
#

#######################################
# In httpd.conf
#######################################
#
LoadModule fastcgi_module modules/mod_fastcgi.so
#
<IfModule mod_fastcgi.c>
	FastCgiIpcDir /tmp/fastcgi
	FastCgiConfig -appConnTimeout 30 -idle-timeout 3 -startDelay 1 -restart-delay 0 -autoUpdate -maxProcesses 200 -maxClassProcesses 1 -processSlack 10 -singleThreshold 0 -multiThreshold 1 -restart -flush
</IfModule>

<IfModule mod_rewrite.c>
    RewriteLock /tmp/rewriter.lock
</IfModule>

#######################################
# In virtual hosts ( 2 hosts defined )
#######################################
#
# game - only CGI (.cgi .pl)
# fame - both FastCGI (.cgi) and CGI (.pl)
#
<VirtualHost game.office:80>
    ServerName game.office
    ServerAlias game
    ServerAdmin webmaster@dummy-host.example.com
    DocumentRoot /home/wws/newyork/game/web
    ErrorLog /home/wws/newyork/game/logs/error_log
    CustomLog /home/wws/newyork/game/logs/access_log common

    RewriteEngine On
    RewriteLog /home/wws/newyork/game/logs/rewrite_log
    RewriteLogLevel 0
    RewriteMap rewriter prg:/home/wws/newyork/game/rewriter.pl
    RewriteRule ^(.*)$ ${rewriter:$1} [L]

        DirectoryIndex index.html index.php
        AddHandler server-parsed .shtml
        AddType    text/html     .shtml

        <Directory /home/wws/newyork/game/web/cgi>
            Options +ExecCGI -Indexes +FollowSymLinks
            AddHandler cgi-script .cgi
            AllowOverride all
            Order allow,deny
            Allow from all
        </Directory>
</VirtualHost>

<VirtualHost fame.office:80>
    ServerName fame.office
    ServerAlias fame
    ServerAdmin webmaster@dummy-host.example.com
    DocumentRoot /home/wws/newyork/game/web
    ErrorLog /home/wws/newyork/game/logs/error_log
    CustomLog /home/wws/newyork/game/logs/access_log common

    RewriteEngine On
    RewriteLog /home/wws/newyork/game/logs/rewrite_log
    RewriteLogLevel 0
    RewriteMap rewriter prg:/home/wws/newyork/game/rewriter.pl
    RewriteRule ^(.*)$ ${rewriter:$1} [L]

        DirectoryIndex index.html index.php
        AddHandler server-parsed .shtml
        AddType    text/html     .shtml

        <Directory /home/wws/newyork/game/web/cgi>
            Options +ExecCGI -Indexes +FollowSymLinks
            AddHandler fastcgi-script .cgi
            AllowOverride all
            Order allow,deny
            Allow from all
        </Directory>
</VirtualHost>
